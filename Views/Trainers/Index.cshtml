@model IEnumerable<PetCare_system.Models.Trainer>

@{
    ViewBag.Title = "Trainer Management";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Header Controls -->
<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap">
    <a class="btn btn-back mb-2" href="@Url.Action("Dashboard", "Home")">
        <i class="fas fa-arrow-left"></i> Back to Dashboard
    </a>
    <div class="container-fluid px-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="mt-4">
                <i class="fas fa-user-tie me-2"></i>@ViewBag.Title
            </h1>
            @Html.ActionLink("Add New Trainer", "Create", null, new { @class = "btn btn-primary btn-lg" })
        </div>

        <div class="card shadow-sm mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="fas fa-list me-2"></i>All Trainers
                </h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover table-striped" id="trainersTable">
                        <thead class="table-dark">
                            <tr>
                                <th>Photo</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Experience</th>
                                <th>Specializations</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>
                                        <img src="@Url.Content(item.ProfilePicture ?? "~/Content/Images/default-trainer.jpg")"
                                             class="rounded-circle shadow" width="50" height="50" alt="Trainer Photo">
                                    </td>
                                    <td>@Html.DisplayFor(modelItem => item.FullName)</td>
                                    <td>@Html.DisplayFor(modelItem => item.Email)</td>
                                    <td>@Html.DisplayFor(modelItem => item.YearsOfExperience) yrs</td>
                                    <td>@Html.DisplayFor(modelItem => item.Specializations)</td>
                                    <td>
                                        <span class="badge @(item.IsActive ? "bg-success" : "bg-secondary")">
                                            @(item.IsActive ? "Active" : "Inactive")
                                        </span>
                                    </td>
                                    <td>
                                        <div class="btn-group" role="group">
                                            @Html.ActionLink("Edit", "Edit", new { id = item.TrainerId },
                                                new { @class = "btn btn-sm btn-outline-primary" })
                                            @Html.ActionLink("Delete", "Delete", new { id = item.TrainerId },
                                                new { @class = "btn btn-sm btn-outline-danger" })
                                        </div>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    @section Styles {
        <link href="https://cdn.datatables.net/1.11.4/css/dataTables.bootstrap5.min.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
        <style>
            body {
                background-color: #f8f9fa;
            }

            .card {
                border: none;
                border-radius: 10px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            }

            .card-header {
                border-radius: 10px 10px 0 0 !important;
                padding: 1.25rem 1.5rem;
            }

            .table th {
                font-weight: 600;
                text-transform: uppercase;
                font-size: 0.8rem;
                letter-spacing: 0.5px;
            }

            .table td {
                vertical-align: middle;
            }

            .badge {
                font-size: 0.75rem;
                font-weight: 500;
                padding: 0.35em 0.65em;
            }

            .btn-group .btn {
                border-radius: 5px;
                margin-right: 5px;
            }

            img.rounded-circle {
                object-fit: cover;
                border: 2px solid #fff;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            }
        </style>
    }

    @section Scripts {
        <script src="https://cdn.datatables.net/1.11.4/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.11.4/js/dataTables.bootstrap5.min.js"></script>
        <script>
            $(document).ready(function () {
                $('#trainersTable').DataTable({
                    responsive: true,
                    language: {
                        search: "_INPUT_",
                        searchPlaceholder: "Search trainers...",
                    },
                    columnDefs: [
                        { orderable: false, targets: [0, 6] }
                    ]
                });
            });
        </script>
    }
